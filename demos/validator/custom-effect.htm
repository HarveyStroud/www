
<%-- :mode=jsp: --%>
<%@ include file="../standalone.jsf" %>

<link rel="stylesheet" type="text/css" href="css/form.css"/>

<style>	
<c:set var="css">
/* error container */
#errors {
	position:fixed;
	top: 130px;
	left:400px;
	background-color:rgba(0, 0, 0, 0.7);
	color:#fff;
	width:400px;
	padding:20px;
	display:none;
	z-index:2;
	-moz-border-radius:5px;
	-webkit-border-radius:5px;
}

/* title */
#errors h2 {
	margin:-5px 0;
	color:yellow;
}

/* "press esc to close" */
#errors small {
	float:right;
	margin-top:-25px;	
}
</c:set>
${css}
</style>

</head>

<body>

<%@ include file="myform.jsf" %>

<c:set var="html">
<div id="errors">
	<h2>Please fix these first</h2>
	<small>press <strong>esc</strong> to close</small> 
</div>
</c:set>
${html}
<script>
<c:set var="js">
// adds an effect called "wall" to the validator
$.tools.validator.addEffect("wall", function(errors, event) {

	// "show" function. only do stuff when form is submitted
	if (event.originalEvent.type == 'submit') {
	
		// get the message wall
		var wall = $(this.getConf().container).fadeIn();
		
		// remove all existing messages
		wall.find("p").remove();
		
		// add new ones
		$.each(errors, function(index, error) {
			wall.append(
				"<p><strong>" +error.input.attr("name")+ "</strong> " +error.messages[0]+ "</p>"
			);		
		});
	}
	
}, function(inputs)  {

});
</c:set>
${js}

<c:set var="init">
// initialize validator with the new effect
$("#myform").validator({effect: 'wall', container: '#errors'});
</c:set>
${init}

<c:set var="esc">
$(document).keydown(function(e)  {
	if (e.keyCode == 27)  {
		$("#errors").fadeOut();
	}		
});
</c:set>
${esc}
</script>
