
<script src="/home/tipiirai/git/jquerytools/test/js/jquery-1.4.2.js"></script>
<script src="/home/tipiirai/git/jquerytools/src/validator/validator.js"></script>

<style>
label {
	display:block;
	font-size:11px;
}

.error {
	width:220px;
	background-color:rgba(255, 245, 1, 0.5);
	font-size:11px;
	border:1px solid #E1E16D;
	padding:4px 55px;
	-moz-border-radius:4px;
	-webkit-border-radius:4px;
}
</style>

<form id="myform" action="server-fail.js">

	<p>
		<label>email *</label>
		<input type="email" name="email" required="required" class="invalid" />
	</p>
	<p>
		<label>website *</label>
		<input type="url" name="url" required="required" />
	</p>
	<p>
		<label>name *</label>
		<input type="text" name="name" required="required" />
	</p>
	<p>
		<label>age</label>
		<input type="number" name="age" size="4" />
	</p>
	
	<button type="submit">Submit form</button>

</form>

<script>
// initialize validator and add a custom form submission logic
$("#myform").validator().submit(function(e) {
	
	var form = $(this);
	
	// client side validation OK.
	if (!e.isDefaultPrevented()) { 
		
		// submit with AJAX
		$.getJSON(form.attr("action") + "?" + form.serialize(), function(json) {
				
			// everything is ok. (server returned true)
			if (json === true)  {
				form.load("success.php");
				
			// server side validation failed. use invalidate() to show errors
			} else {
				form.data("validator").invalidate(json); 
			}
		});
		
		// prevent default form submission logic
		e.preventDefault();			
	} 
});
</script>
