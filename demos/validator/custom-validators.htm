
<script src="/home/tipiirai/git/jquerytools/lib/jquery-1.4.js"></script>
<script src="/home/tipiirai/git/jquerytools/src/validator/validator.js"></script>

<link rel="stylesheet" type="text/css" href="form.css"/>

<form id="custom">

	<label>
		Password
		<input type="password" name="password" oninvalid="myfunc()"/>
	</label>
	
	<label>
		Password check
		<input type="password" name="password" equals="password" />
	</label>
	
</form>
		
<script> 
function myfunc() {
	console.info("my", this, arguments);		
}
// password strength
$.tools.validator.fn(":password", function(el, value) {
		return value.length > 5 ? true : {fi: "Password not strong enough" };
});

// generic equals function
$.tools.validator.fn("[equals]", "Value not equal with the $1 field", function(el) {
	var name = el.attr("equals"),
		 field = this.getInputs().filter("[name=" + name + "]");
		 
	return el.val() == field.val() ? true : [name]; 
});


// define new attribute and a proper error message for invalid value
$.tools.validator.fn("[name=username]", "Username is already taken", function() {
	
});

var validator= $("#custom input").validator().data("validator");

$("[name=password]").oninvalid(function() {
	var api = $(this).data("validator");
	console.info(".--", arguments, api);
});

</script>
