<%-- :mode=jsp: --%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<link rel="stylesheet" type="text/css" href="${jqt}/css/tooltip-generic.css"/>
<link rel="stylesheet" type="text/css" href="download.css"/>

<%--{{{ script --%>

<script>
$(function() {

	var els = $(".listing :checkbox").attr("checked", false);

	// tooltips
	$(".listing img").tooltip({
		position: ['right', 'top'],
		effect: 'toggle',
		offset: [60, 10],
		opacity: 0.9,
		delay: 50
	});


	// checkbox change
	els.change(function() {

		// count size
		var size = 0, count = 0;
		els.filter(":checked").each(function() {

			// 170 bytes for stripping down comment size
			size += parseFloat($(this).val()) - 170;
			count++;
		});

		// user information
		$("#selected").html('(' +count+ ' of ' + els.size() + ' selected)');
		$("#minified").html(Math.round(size / 10) / 100 + ' kb');
		$("#gzipped") .html(Math.round(size * 0.0322) / 100 + ' kb <em>gzipped</em>');

		// combination string
		var tools = "";
		els.each(function() {
			tools += (this.checked) ? "x" : "_";
		});

		$("#downloadLink").attr("href", "/js${jqt}/${v.tools}/" +tools+ "/jquery.tools.min.js?download=true");
		$("#tokens").html(tools);


		// highlight row
		var tr = $(this).parents("tr"), checked = this.checked;

		if (checked) {
			tr.addClass("selected");
		} else {
			tr.removeClass("selected");
		}

		// show/hide plugins
		if (!tr.is(".plugin")) {
			tr.nextAll().each(function()  {
				if ($(this).is(".plugin"))  {
					if (checked) {
						$(this).fadeIn();
					} else {
						$(this).hide().removeClass("selected").find(":checkbox").attr("checked", false);
					}

				} else  {
					return false;
				}
			});
		}

	});

	// default selection
	$("#t_validator, #t_tabs, #t_tooltip, #t_scrollable, #t_overlay").each(function() {
		$(this).find(":checkbox").click().triggerHandler("change");
	});
});
</script>
<%--}}}--%>


<h1 id="hero">
	<span></span>
	Download
	<em>Select the tools you want or grab the source code</em>
</h1>


<h2 class="first">Quick start</h2>

<p>
	 Insert the following line on your HTML page and you are done!
</p>

<pii:code lang="html">
<script src="${cdnt}/${v.tools}/jquery.tools.min.js"></script>
</pii:code>

<p>
	 This is the official <strong>jQuery Tools UI library</strong> and after the inclusion you will have the following tools available:
</p>

<ol>
	<c:forEach items="${metadata.tools}" var="tool" end="15" varStatus="i">
		<c:if test="${empty tool.plugin}">
			<li><a href="${tool.www}" ${i.index == 0 ? 'class="external"' : ''}>${tool.title}</a></li>
		</c:if>
	</c:forEach>
</ol>

<p>
	The tools will be loaded with <a href="performance.html">maximum performance</a> no matter where your client is located on the globe. Without the jQuery library, the file size is roughly <strong>${v['tools.size']} Kb</strong> when gzipping is enabled on the server side. If you already have jQuery included on your page, you can simply remove it and use only this one <samp>script src</samp> statement.
</p>

<p>
	Please note that this global content delivery network is <strong>completely free</strong>. You can use it freely in any website including production environments. This network has been kindly offered for all jQuery Tools users by <a href="http://www.netdna.com/" class="external">Net DNA</a>. Respect to them!
</p>

<%--}}}--%>


<a name="combine"></a>
<h2>Grab your own set of jQuery Tools: <em id="selected"></em></h2>
<h3 style="color:#7788FF;margin:5px 0 15px 0;">Or download the MIT/GPL Source Code</h3>

<p>
	Here you can download individual tools or create a custom combination of tools by selecting only those you want. Both the <strong>source code</strong> and the <strong>minified versions</strong> are available. 
</p>


<table class="listing">

<c:forEach items="${metadata.tools}" var="tool" varStatus="i">

	<c:if test="${!empty tool.cat}">
		</table>
		<h3>${tool.cat}</h3>
		<table class="listing">	
	</c:if>

	<c:if test="${empty tool.cat}">
	
		<c:set var="source" value="/js/tools/${v.tools}/${tool.file}.js"/>
		<c:set var="min" value="/js/tools/${v.tools}/${tool.file}.min.js"/>
	
	
		<tr id="t_${tool.key}" ${!empty tool.plugin ? 'class="plugin"' : ''}>
			<td>
				<c:if test="${!empty tool.file}">
					<label>
						<input type="checkbox" name="tool" value="${f:fileLength(min)}" /> ${tool.title}
					</label>					
				</c:if>
				
				<c:if test="${empty tool.file}">
					<strong>${tool.title}</strong>
				</c:if>
			</td>
			<td><small>${tool.requires}</small></td>
	
			<%-- jQuery downloads --%>
			<c:if test="${tool.name == 'jquery'}">
				<td><a href="http://jqueryjs.googlecode.com/files/jquery-${v.jquery}.js">${f:fileSize(source)}</a></td>
				<td><a href="http://jqueryjs.googlecode.com/files/jquery-${v.jquery}.min.js">${f:fileSize(min)}</a></td>
			</c:if>
	
			<%-- other downloads --%>
			<c:if test="${tool.name != 'jquery' && !empty tool.file}">
				<td><a href="${source}?download=true">${f:fileSize(source)}</a></td>
				<td><a href="${min}?download=true">${f:fileSize(min)}</a></td>
			</c:if>
	
			<td>
				<img src="/img/global/info_small.png" />
				<div class="tooltip">
					<h3>${tool.title}</h3>
					<p>${tool.description}</p>
					<p>
						<a href="${tool.www}">more information</a>
					</p>
				</div>
			</td>			
		</tr>
		
	</c:if>
	
</c:forEach>

</table>

<a href="#" id="downloadLink">
	<img src="/img/commerce/download.png" alt="Download jQuery Tools" />
</a>

<h3 style="margin:10px 0 20px 0">
	<em>Size</em>: <span id="minified"></span> / <span id="gzipped"></span>
</h3>


<a name="full"></a>
<h3><strong>FULL</strong> jQuery Tools from CDN</h3>

<p>
	Insert the following line on your HTML page if you want to use the full library from the content delivery network. 
</p>

<pii:code lang="html">
<script src="${cdnt}/${v.tools}/full/jquery.tools.min.js"></script>
</pii:code>

<p>
	This includes all the Tools, plugins and effects but <em>not</em> the Flowplayer files. 
</p>

<a name="tiny"></a>
<h3>jQuery Tools <em>without jQuery</em></h3>

<p>
	If you prefer to load jQuery separately we have a <em>minimal</em> jQuery Tools file as follows:
</p>

<pii:code lang="html">
<!-- The recommended practice is to load jQuery from Google's CDN service.  -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/${v.jquery}/jquery.min.js"></script>

<!-- Tabs, Tooltip, Scrollable, Overlay, Expose. No jQuery. -->
<script src="${cdnt}/${v.tools}/tiny/jquery.tools.min.js"></script>
</pii:code>

<p>
	Make sure the jQuery library is always loaded <em>before</em> the jQuery Tools library.
</p>

