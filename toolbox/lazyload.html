
<style>
.more {
	font-size:16px;
}

.col {
	width:350px;
	padding-right:10px;
	border-right:1px solid #ccc;
	margin-right:15px;
	float:left;
}

.last {
	margin:0;
	padding:0;
	border-right:0;
}

pre em {
	color:green;		
}
</style>

<h1>
	jQuery Tools / Lazyload
	<em>Your site can be (even) faster</em>
</h1>
 
<h2>DEMO: Lazyloaded Scrollable</h2>
 
<p class="more">
	Lazyload helps you control the loading of your performance heavy assets: images, background images and non visible HTML.
</p> 
 
<div class="col">
	<h3>Faster loading of pages</h3>
	
	<p>
		Lazyload enables you to control the loading of images, background images and HTML. If your page contains large images that are not visible yet there is no need to load all of them beforehand. This tool defers the loading of your assets until you <em>really</em> need them making your pages work faster. This differs from "regular" AJAX loading in a very important way: your content is there on the page for search engines.
	</p> 
	 
	
	<h3>Integrate to your existing pages</h3>
	
	<p>
		Lazyload works out of the box. Add this call to your page <samp>$(":invisible").lazyload(true);</samp> and your done.  If you have lot's of images this will have instant effect for your site. Your images are not loaded until they become visible when user scrolls the page. View <a href="${jqt}/demos/toolbox/lazyload/index.html">demo</a>.
	</p>
</div>	 
 
<div class="col last">
	<h3>Integrate to your JavaScript code</h3>
	
	<p>
		The main reason for developing this tool was to give a generic loading capability for Tabs, Overlays, Scrollables and Tooltips. They can now load heavy elements the server without consuming redundant bandwidth. You and can also extend your own JavaScript tools with Lazyload. There is a simple and powerful API and event model and you can add customized <a href="#loaders">loaders</a> and appearance <a href="#effects">effects</a> when needed. 
	</p>
	
	<h3>Load anything</h3>
	
	<p>
		Besides images you can also load any kind of HTML and if the loaded content contains more images they are also lazyloaded! The whole mass of HTML and images are not revealed until they are all loaded. A progress indicator can be shown making your application responsive.   
	</p>
	
</div>	 
 
<br clear="all" />

<a name="tools"></a>
<h2>jQuery Tools and lazyload</h2>

<p>
	Lazyloading can be enabled for all <strong>UI Tools</strong> with the <samp>lazyload</samp> configuration variable. Many times simply setting it to <samp>true</samp> may be the only thing you need. For example:
</p>

<pii:code>
$("#scroll").scrollable({ lazyload: true });
</pii:code>

<p>
	This will find all images and background images inside scrollable root element and load them only when they become visible (by scrolling). You have to make sure that the lazyload tool has been included on your page. The <samp>lazyload</samp> configuration variable accepts following types of values:
</p>

<pii:code>
// boolean: when set to true the tool lazyloads all images and background images
lazyload: true

// string: lazyload elements specified by a jQuery selector (within the tool)
lazyload: '.myimages'

// object: lazyload for all images and background images with a custom lazyload configuration 
lazyload: {
	effect: 'grow'
}

// object: lazyload selected elements with a custom lazyload configuration 
lazyload: {
	select: '.myimages',
	effect: 'grow'
}
</pii:code>

<a name="usage"></a>
<h2>Lazyload as standalone tool</h2>

<p>
	Lazyload can also be used as a standalone tool. Here are examples
</p>

<pii:code>
// only load non-visible images when they become visible by scrolling
$("img:invisible").lazyload(true);
</pii:code>

<pii:code>
// initialize lazyloading for all elements with class name "defer"
var api = $(".defer").lazyload({
	fadeInSpeed: 400,
	api: true
});

// load first five elements
api.load(0, 5);

// load all elements
api.load();
</pii:code>

<h2>Demos</h2>

<ul>
	<c:forEach items="${f:getDemo(context.toolDemos2, 'toolbox/lazyload/index.html').category.demos}" var="demo">
		<li> <a href="${jqt}/demos/${demo.path}">${demo.title}</a> </li>
	</c:forEach>
</ul>
 

<h2>Loaders and effects</h2>
 
<p>
	The behaviour of this tool is based on loaders and effects. Loader is responsible of loading the element from the server and effect will show the element to the user after the loading is performed. Lazyload has three built-in loaders for images, background images and HTML and two effects called "show" and "grow". 
</p>

<p>
	The HTML loader relies on following kind of syntax:
</p>

<pii:code lang="html">
<!-- the container for loaded content. typically DIV -->
<div>
	<!-- the loaded content's URL is specified here -->
	<a href="loaded-content.html">Search friendly content here</a>
</div>
</pii:code>

<p>
	So it's a wrapper element (typically <samp>div</samp>) enclosed with a single anchor tag where the loaded page is specified in <samp>href</samp> attribute. This is standard HTML and is viewable by search engines and JavaScript disabled browsers too.
</p>


<a name="configuration"></a>
<h2>Configuration</h2>	
 
<table class="listing">

	<thead>
		<tr>
			<th>property</th>
			<th>default</th>
			<th>description</th>
		</tr>
	</thead>	
	<tr>
		<td class="code">css</td>
		<td class="code">Object</td>
		<td>
			<p>
				CSS class names being used in various states of a loadable element. 
			</p>
<pre>
{
	<em>// while element is being loaded</em>
	loading: 'loading',
	
	<em>// while element is being loaded</em>
	before: undefined,
	
	<em>// while element is being loaded</em>
	after: undefined,
	
	<em>// class name for the progress indicator</em>
	progress: 'progress'
}
</pre>
		</td>
	</tr>
	<tr>
		<td class="code">effect</td>
		<td>'show'</td>
		<td>
			Name of the display effect to be used after the element has been loaded. Two built-in effects are provided: a simple "show" effect and a <a href="#grow">grow effect</a>.
		</td>
	</tr>
	<tr>
		<td class="code">fadeInSpeed</td>
		<td>'normal'</td>
		<td>
			Fade in speed for the "show" effect. A nonzero value causes the element to be gradually shown from zero to full opacity.
		</td>
	</tr>
	<tr>
		<td class="code">progress</td>
		<td>'Loading'</td>
		<td>
			the text (or HTML code) to be used inside the progress indicator while an element is being loaded. HTML code allows you to use animated GIF's for example.
		</td>
	</tr>	
</table> 

<a name="grow"></a>
<h3>Grow effect</h3>
 
<p>
	This effect performs an growing (or shrinking) animation for a specified parent element of the loadable element. The dimensions are determined from the element being loaded. This can be either image dimensions or if the loaded element is a HTML DIV for example the dimensions are CSS <samp>width</samp> and <samp>height</samp> dimensions are being used. This effect has it's own set of configuration properties as follows:
</p>

<table class="listing">
	<tr>
		<td class="code">growSpeed</td>
		<td>'slow'</td>
		<td>
			The speed of the growing animation.
		</td>
	</tr>
	<tr>
		<td class="code">growParent</td>
		<td class="code"></td>
		<td>
			jQuery selector for the closest parent element to be grown. By default the direct parent element is selected.
		</td>
	</tr>
</table>
 
<a name="api"></a> 
<h2>Scripting API</h2>
 

<table class="listing">
	<thead>
		<tr>
			<th>Method</th>
			<th nowrap>Return value</th>
			<th>Description</th>
		</tr>
	</thead>
	<tr>
		<td class="code">getConf()</td>
		<td><code>Object</code></td>
		<td>
			Returns the Lazyload configuration.
		</td>
	</tr>	 
	<tr>
		<td class="code">getProgress()</td>
		<td><code>jQuery</code></td>
		<td>
			Returns the progress indicator element.
		</td>
	</tr>
	<tr>
		<td class="code">load()</td>
		<td><code>API</code></td>
		<td>
			Perform loading.
		</td>
	</tr>
	<tr>
		<td class="code">load(index)</td>
		<td><code>API</code></td>
		<td>
			Perform loading only for element specified by the index (stating from 0).
		</td>
	</tr>
	<tr>
		<td class="code">load(start, len)</td>
		<td><code>API</code></td>
		<td>
			Load <samp>len</samp> amount of elements beginning from <samp>start</samp> index.
		</td>
	</tr>
	<tr>
		<td class="code">load(jQuery)</td>
		<td><code>API</code></td>
		<td>
			Load elements specified in the argument. The supplied elements must be contained on the initial set of lazyloaded elements.
		</td>
	</tr>

	<tr>
		<td class="code">preload()</td>
		<td><code>API</code></td>
		<td>
			This function performs the same functionality as <samp>load</samp> but does not execute the effect after the loading is done. Accepts the same set of arguments as the <samp>load</samp> method.
		</td>
	</tr>
	
</table>

<a name="events"></a>
<h2>Events</h2>

<p>
	Make sure you have read about <a href="${jqt}/documentation/events.html">Events in jQuery Tools</a>. All event listeners receives <a href="${jqt}/documentation/events.html#object">Event Object</a> as the first argument.
</p>

<table class="listing">
	<thead>
		<tr>
			<th>event</th>
			<th nowrap>When it occurs?</th>
		</tr>
	</thead>

	<tr>
		<td class="code">onBeforeLoad</td>
		<td>
			When loading is about to begin.
		</td>
	</tr>
	<tr>
		<td class="code">onError</td>
		<td>
			When an error occurred on individual element's loading. wrong url, timeout etc.. the loaded element is supplied in second argument and the error is supplied in third argument.
		</td>
	</tr>
	<tr>
		<td class="code">onLoad</td>
		<td>
			When individual element has been loaded. The loaded element is supplied in second argument.
		</td>
	</tr>
	<tr>
		<td class="code">onLoadAll</td>
		<td>
			When all elements specified for <samp>load</samp> method has been loaded. Loaded elements are supplied in second argument.
		</td>
	</tr>
	
</table>


<a name="loaders"></a> 
<h2>Creating Loaders</h2>
 
<p>
	You can add new loaders with <samp>addLoader</samp> function. Here is a skeleton for a loader:
</p>

<pii:code>
// first argument is a jQuery selector that will have to match your element
$.tools.lazyload.addLoader(".myselector", 

	// initialize the matched element here
	function(el) {
		
	
	// perform loading of the element here. call done when loading is performed
	}, function(el, done) {
		
	}
); 
</pii:code> 
 
<a name="effects"></a>
<h2>Creating Effects</h2>
 
<p>
	You can add new loaders with <samp>addLoader</samp> function. Here is a skeleton for an effect:
</p>

<pii:code>
// first argument is the effect name. done function is called when the effect is performed
$.tools.lazyload.addEffect("shake", function(el, done) {
	el.animate({width: '+=20', height: '-=50'}, "slow", done);
});
</pii:code>
