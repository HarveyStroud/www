<%-- :mode=jsp: --%>
<c:set var="tool" value="flashembed"/>

<h1 style="background-image:url(img/hero/flashembed.jpg)">
	jQuery TOOLS / flashembed - Adobe Flash embedding.
	Your future tool to place Flash objects on your pages
</h1>

<style>
#flash2 {
	margin-left:-20px;
}
</style>
<%@ include file="demos/flashembed/onclick2.htm" %>

<h2>Motivation</h2>

<p>
	Today the role of JavaScript is rising on a tremendous speed. All major browser vendors are competing with each other to make the best JavaScript engine in the world. We can expect to see more and more JavaScript widgets and goodies to appear on the market. Not just these tools. Having said that Flash technology still has an important role on the Internet. Especially when you want to play videos there is virtually no competition.
</p>

<p>
	Flashembed is a JavaScript tool that you can use to embed Flash objects on your website. There are other tools for embedding Flash objects, but none of them offers the same flexibility and ease of use as this one. Here are the highlights:
</p>

<ul>
	<li>
		<strong>Simplicity</strong>. The above example was performed with this JavaScript call: <br />
		<samp>flashembed(this, "flash_promo.swf");</samp>  <br />
		If you don't need anything special you don't have to study much.
	</li>
	<li>
		<strong>JSON configuration</strong>. When supplying configuration for Flash objects, the values can be complex JavaScript objects with arrays, strings, functions and other objects. As opposed to the traditional XML-based configuration, this is simpler and much more flexible. In fact this was the main reason for developing this tool.
	</li>
	<li>
		<strong>jQuery support</strong>. flashembed is designed with scripters in mind. A polished programming API together with support for jQuery selectors has been built-in.
	</li>
	<li>
		<strong>Size</strong>. Although rich in features, this plugin weighs around <strong>5 kb</strong> when minified. This is almost half the size of our competitors.
	</li>
	<li>
		<strong>Demos</strong>. We have a lot of <a href="demos/flashembed">demos</a> and each demo is documented and has a <em>standalone version</em> where everything redundant has been stripped off. There you can see how things can be placed on your site. Copying-and-pasting is encouraged.
	</li>
</ul>

<p style="color:#555">
	This tool is a mature project and is actively maintained. <a href="/js${jqt}${jqt}.${tool}-${v[tool]}.js">Source code</a> is clean, professional and easy to follow. It passes Douglas Crockford's <a href="www.jslint.com" class="external">JavaScript Verifier</a> and it assigns only one global variable: <samp>flashembed</samp>. Active forums keeps this tool alive and you can expect to see new releases coming out in the future.
</p>

<h3>Flashembed and jQuery Tools</h3>

<p>
	Apart from <a href="index.html">other tools</a> this tool does <strong>not</strong> depend on jQuery. You can use it as a standalone tool for embedding Flash. The jQuery syntax is <em>supported</em> but not required. For this reason, this tool lacks some of the features available in other tools such as callback functions and the ability to write plugins.
</p>

<p>
	This tool is also <strong>not</strong> included in the <a href="download.html">official jQuery Tools</a> package because we want to support web standards and not promote a high level of Flash usage. At the moment, the only true exception is video playback because there are no good alternate technologies available.
</p>


<h2>Demos</h2>

<p>
	We have seen that the best way to learn is through demos. Each of the following examples contain both documented source code and a standalone version of the demo that you can use to get flashembed working on your site:
</p>

<ul>
	<c:forEach items="${f:getDemo(context.toolDemos, 'flashembed/index.html').category.demos}" var="demo">
		<li> <a href="demos/${demo.path}">${demo.title}</a> </li>
	</c:forEach>
</ul>

<a name="documentation"></a>
<h2>Usage</h2>

<p>
	flashembed is a function and it accepts following arguments:
</p>

<pii:code>
flashembed(container, configuration, flashvars);
</pii:code>

<ol>
	<li>
		<strong>container</strong> identifies <em>where</em> the Flash object is placed on the document.
	</li>
	<li>
		<strong>configuration</strong> specifies the <em>path</em> to the Flash object and optionally <em>how</em> it is embedded.
	</li>
	<li>
		<strong>flashvars</strong> is an optional argument and it configures the actual Flash object.
	</li>
</ol>

<h3><span class="blue">1st argument: </span> container</h3>

<p>
	This is either a DOM element or a string representing some element's <samp>id</samp> attribute. The Flash object is placed <em>inside</em> this container. It's important to note that you don't have to care where you place your container on the page and where you place your flashembed call. This tool takes care of finding your container you specify.
</p>

<h3><span class="blue">2nd argument: </span> configuration</h3>

<p>
	The second argument specifies the <em>path</em> to the Flash object and optionally <em>how</em> it is embedded. This is either a simple string representing the path to the embedded flash object or an object that has many different configuration options including the path to the Flash object.
</p>

<p>
	In case you give the second argument as an object, you can find a list of available options here. The options <em>before</em> the grey line are specific to flashembed and below that you can see the most popular <a class="external" href="http://kb.adobe.com/selfservice/viewContent.do?externalId=tn_12701">Flash parameters</a> that are understood by the Flash technology itself.
</p>

<table class="listing">

	<thead>
		<tr>
			<th>property</th>
			<th>default</th>
			<th>description</th>
		</tr>
	</thead>

	<tr>
		<td class="code"><strong>src</strong></td>
		<td></td>
		<td>
			The path to the Flash object to be embedded. This is the only required option.
		</td>
	</tr>
	<tr>
		<td class="code">version</td>
		<td></td>
		<td>
			Specifies the minimum version required for the plugin. Adobe releases Flash versions in the following format: <samp>[major, 0, fix]</samp> where the minor number is always zero. For that reason, this tool ignores the second version number and the version is given in this format: <samp>[major, fix]</samp>.

			<p>
				So if you want to provide alternate content for versions that are below <samp>[9,0,45]</samp>, you must supply <samp>[9,45]</samp> here.
			</p>
		</td>
	</tr>
	<tr>
		<td class="code">expressInstall</td>
		<td></td>
		<td>
			This is an absolute or relative path to a <a href="/swf/expressinstall.swf">expressinstall.swf</a> file.
			<p>
				<a href="http://www.adobe.com/devnet/flashplayer/articles/express_install.html" class="external">Express Install</a> technology allows you to seamlessly upgrade visitors to your website to the latest player using a Flash-based experience. Express Install allows you to design an in-context upgrade experience for your content so users never have to leave your site. It also lets you gracefully handle user cancellation and avoid system restarts.
			</p>

			<p>
				If this is specified and the user's Flash version is greater than <samp>[6, 65]</samp>, then this plugin attempts to install Flash on-the-fly. You can learn more about this from <a href="demos/flashembed/fail.html">this demo</a>.
			</p>
		</td>
	</tr>
	<tr>
		<td class="code">onFail</td>
		<td></td>
		<td>
			A JavaScript function that is evaluated when the Flash plugin is missing or its version is too old. You can learn more about this from <a href="demos/flashembed/fail.html">this demo</a>. This function is called in every possible scenario when and old version is detected. Inside the function the <samp>this</samp> variable is a pointer to the <a href="#api">flashembed API</a>.
		</td>
	</tr>
	<tr>
		<td class="code">w3c</td>
		<td class="code">false</td>
		<td>
			if set to <samp>true</samp>, the tool switches to standards-based <samp>OBJECT</samp> syntax when generating HTML. You can find more information about this technical subject <a href="#html">here</a>.
		</td>
	</tr>
	<tr>
		<td class="code">cachebusting</td>
		<td class="code">false</td>
		<td>
			By enabling this property flashembed will force the SWF file to be loaded from the cache no matter what the expiry headers are. This is achieved by appending a random query string variable on the request URL.
		</td>
	</tr>

	<tr><td colspan="3" style="background-color:#efefef"></td></tr>

	<tr>
		<td class="code">bgcolor</td>
		<td></td>
		<td>The hexadecimal RGB value in the format of #RRGGBB. This specifies the background color of the movie.</td>
	</tr>
	<tr>
		<td class="code">width</td>
		<td class="code">100%</td>
		<td>
			It is recommended that you not change this and instead specify the width and height for the <em>container</em> element using CSS.
		</td>
	</tr>
	<tr>
		<td class="code">height</td>
		<td class="code">100%</td>
		<td>
			It is recommended that you not change this and instead specify the width and height for the <em>container</em> element using CSS.
		</td>
	</tr>
	<tr>
		<td class="code">wmode</td>
		<td class="code">window</td>
		<td>
			Set this to "opaque" if you want to place normal HTML elements on top of the Flash object, for example, a dropdown menu. You can find a demo about this <a href="demos/flashembed/wmode.html">here</a>.
		</td>
	</tr>
	<tr>
		<td class="code">allowfullscreen</td>
		<td class="code">true</td>
		<td>
			Allows your Flash object to enter Fullscreen mode. If you don't need this feature or are concerned about security, set this to <samp>false</samp>.
		</td>
	</tr>
	<tr>
		<td class="code">allowscriptaccess</td>
		<td class="code">always</td>
		<td>
			This enables Flash-to-JavaScript communication. If you don't need this feature or are concerned about security, set this to <samp>false</samp>.
		</td>
	</tr>
	<tr>
		<td class="code">quality</td>
		<td class="code">high</td>
		<td>
			Possible values are 'low', 'high', 'autolow', 'autohigh', and 'best'.	'low' favors playback speed over appearance and 'best' provides the best display quality and does not consider playback speed. It is recommended that you not change this. The default value "high" is the best compromise between quality and playback speed.
		</td>
	</tr>
</table>

<h3><span class="blue">3rd argument: </span> flashvars</h3>

<p>
	The third argument configures the Flash object you have defined in the second argument. This is optional because not all Flash objects are not configurable. This is given as a JavaScript object as follows:
</p>

<pii:code>
// supply configuration (flashvars) for the Flash object
flashembed("flash", "my_object.swf", {

	my_param: 'foobar',
	my_other_param: 'Hello world'

});
</pii:code>

<p>
	Flashembed has the unique feature of configuring your Flash objects with JSON. This gives you the ability to supply complex configurations directly upon embedding. JSON is a JavaScript-based syntax and is much more flexible and simpler than XML which has historically been used for Flash configuration. Here is an example of a JSON-based configuration:
</p>

<pii:code>
flashembed("flash", "my_object.swf", {

	/*
		a JSON-based configuration variable.
		enter the modern world of Flash configuration!
	*/
	my_param: {
		my_array: [1, 2, 3], ,
		my_other_param: 'Hello world',
		nested_object: {
			another_array: ["foo", "bar", 30.3]
		}
	}

});
</pii:code>

<p>
	If you are developing a Flash object and want to configure it with JSON, you can find JSON parsers for Flash from <a href="http://code.google.com/p/as3corelib/" class="external">as3corelib</a>.
</p>


<h3>A few embedding examples</h3>

<pii:code>
// install Flash object inside an element whose id is "flash"
flashembed("flash", "myfolder/my_flash_object.swf");

// install Flash inside a certain DOM element
var domElement = getElementById("flash");
flashembed(domElement, "my_flash_object.swf");

// tweak embedding options
flashembed("flash", {
	src: 'my_object.swf',
	allowfullscreen: false
});
</pii:code>


<a name="jquery"></a>
<h2>jQuery support</h2>

<p>
	Flashembed has support for jQuery. This means that it can work as both a standalone script or as a jQuery plugin. You can use jQuery selectors to select elements from the page and place Flash objects inside them. Here is the generic jQuery syntax for flashembed:
</p>

<pii:code>
$("jquery_selector").flashembed(configuration, flashvars);
</pii:code>

<p>
	As you can see, there are a maximum of 2 arguments here and <samp>flashvars</samp> is optional as before. You can find information about jQuery selectors <a href="http://docs.jquery.com/Selectors">here</a>. Here is an example that will search all <samp>DIV</samp> elements with the class name "flash" and place a Flash object inside them:
</p>

<pii:code>
$("div.flash").flashembed("my_object.swf");
</pii:code>

<p>
	Simple and powerful.
</p>

<a name="api"></a>
<h2>Flashembed <span class="blue">API</span></h2>

<p>
	Here you can see the two different ways of accessing the Flashembed API:
</p>

<pii:code>
// the API is returned by the flashembed call
var api = flashembed("flash", "myfolder/my_flash_object.swf");

// inside the onFail function, the "this" variable is a pointer to the API
flashembed("container", {src: 'my_object.swf', version: [9, 115], onFail: function() {

	// use API methods here
	var conf = this.getConf();

});
</pii:code>

<p>
	This API has following methods available for your use:
</p>

<table class="listing">

	<tr>
		<td class="code">getContainer()</td>
		<td>Returns the container for the Flash object as a DOM element.</td>
	</tr>
	<tr>
		<td class="code">getConf()</td>
		<td>Returns the Flash configuration (2nd argument).</td>
	</tr>
	<tr>
		<td class="code">getFlashvars()</td>
		<td>Returns possible Flash object configuration (3rd argument).</td>
	</tr>
	<tr>
		<td class="code">getVersion()</td>
		<td>Returns user's Flash version as an array.</td>
	</tr>
	<tr>
		<td class="code">getApi()</td>
		<td>Some Flash objects have a JavaScript API. This method returns a pointer to this API.</td>
	</tr>
	<tr>
		<td class="code">getHTML()</td>
		<td>Returns the HTML code that was used to embed this player on the client's machine. By supplying <samp>true</samp> as the argument, you will get standards-compatible code that can be used to embed this Flash object anywhere and it works in all major browsers.</td>
	</tr>
</table>


<h2>Static methods</h2>

<p>
	Flashembed exposes three static methods for your use:
</p>

<pii:code>
// get current flash version. returns an array [major, fix]
flashembed.getVersion();

// check if version [9, 0] is supported
flashembed.isSupported([9, 0]);

// use this when you want to perform JavaScript when the document is fully scriptable
flashembed.domReady(function()  {
	// place your code here

});

// return embedding code for a given configuration and optional flashvars
flashembed.getHTML({src: 'my_object.swf', w3c: true}, {
	param1: 'foobar',
	param2: 'baz'
});
</pii:code>

<p>
	The last method <samp>getHTML</samp> is useful when you want to generate the <samp>OBJECT</samp> tag for your Flash objects so that you don't need to use JavaScript on your pages.
</p>


<a name="html"></a>
<h2>Generated HTML</h2>

<p>
	This chapter describes what happens "behind the scenes" and what kind of HTML is generated for the client when the Flash object is embedded. This is quite technical and if you are not interested in W3C standards you can freely skip this section.
</p>

<p>
	When studying what HTML will be produced we are using the following flashembed call:
</p>

<pii:code embed="true">
flashembed("clock", "/swf/clock.swf");
</pii:code>

<p>
	Which will generate a Flash-based clock as seen below:
</p>

<div id="clock" style="height:120px;width:120px"></div>

<p>
	This will generate the following HTML for Mozilla, Safari, Opera and Chrome:
</p>

<pii:code lang="html">
<object data="/swf/clock.swf" type="application/x-shockwave-flash" width="100%" height="100%">

	<!-- these parameters are generated by default -->
	<param name="allowfullscreen" value="true">
	<param name="allowscriptaccess" value="always">
	<param name="quality" value="high">
</object>
</pii:code>

<p>
	This is a standards-based syntax as specified on this <a href="http://www.w3.org/TR/REC-html40/struct/objects.html" class="external">W3C specification</a>. It's no surprise that Internet Explorer does not support this syntax and this browser is supplied with the following HTML instead.
</p>

<pii:code lang="html">
<object height="100%" width="100%" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
	<param value="/swf/clock.swf" name="movie"/>
	<param value="true" name="allowfullscreen"/>
	<param value="always" name="allowscriptaccess"/>
	<param value="high" name="quality"/>
</object>
</pii:code>

<p>
	This works only in IE and not in other browers.
</p>

<a name="w3c"></a>
<h3><em>W3C</em> configuration option</h3>

<p>
	Flashembed comes with a <samp>W3C</samp> option that will generate a standards-based syntax that works on <strong>all</strong> browsers. This syntax is specified in this <a href="http://www.alistapart.com/articles/flashsatay" class="external">A List Apart document</a> and you can generate similar code like this:
</p>

<pii:code>
// enable W3C object code syntax
flashembed("clock", {src: "/swf/clock.swf", w3c: true});
</pii:code>

<p>
	The generated HTML looks like this:
</p>

<pii:code lang="html">
<object height="100%" width="100%" type="application/x-shockwave-flash" data="/swf/clock.swf">
	<param value="/swf/clock.swf" name="movie"/>
	<param value="true" name="allowfullscreen"/>
	<param value="always" name="allowscriptaccess"/>
	<param value="high" name="quality"/>
</object>
</pii:code>

<p>
	This would appear to be a perfect solution, but there is one drawback. While every other browser is getting it right, IE/Windows is not streaming - it waits for the entire movie to download before playing it. This is fine for small movies, but for anything serious, the lack of streaming is unacceptable. This is why this flag is only suitable for standard freaks that are using small SWF files. The A List Apart document describes a workaround for this called "Flash satay" and you can read about it in the document.
</p>


